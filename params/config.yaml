# --- PROJECT SETTINGS ---
project_name: "SPQA_FullVol_Ultra"
mode: "train"
method: "MC"
seed: 42

# --- MODEL ARCHITECTURE (Main Segmentation Model) ---
model:
  architecture: "unet3d"
  in_channels: 1
  n_classes: 1
  # This controls your main UNet, keeping it high-capacity for quality
  channels: [32, 64, 128, 256, 512]
  strides: [2, 2, 2, 2]
  dropout_rate: 0.2
  image_size: [256, 256, 256]
  latent_dim: 2048 # UPDATED to match VAE bottleneck
  model_path: ""

# --- DATA CONFIGURATION ---
Data:
  training_ids: "C:/Users/Lab/OneDrive/Desktop/SPQA/fold_4/training_ids.txt"
  test_ids: "C:/Users/Lab/OneDrive/Desktop/SPQA/fold_4/test_ids.txt"
  raw_data_root: "C:/Users/Lab/OneDrive/Desktop/SPQA/synthstrip_data_v1.5"
  image_size: [256, 256, 256]

# --- TRAINING HYPERPARAMETERS ---
Train:
  batch_size: 1 # UPDATED: Use 1 with accumulation_steps=4 in the code
  epochs: 1000
  learning_rate_gen: 0.0001
  patience: 50
  save_dir: "C:/Users/Lab/OneDrive/Desktop/SPQA/logs/checkpoints_ultra"

# --- LOSS WEIGHT PARAMETERS ---
# These are used in Phase 2 once Dice hits > 0.75
LossWeights:
  dice: 20.0
  bce: 0.01      # This is the Boundary/SDM weight
  laplace: 0.1   # This is the Active Contour weight
  fix_weight: 5.0
  recon_base: 1.0

# --- QUALITY CONTROL (VAE Settings) ---
QC:
  enabled: True
  architecture: "vae3d"
  in_channels: 2
  checkpoint_dir: "C:/Users/Lab/OneDrive/Desktop/SPQA/logs/vae_checkpoints"
  # Update this path once you have a high-performing Phase 2 model
  best_model_path: "C:/Users/Lab/OneDrive/Desktop/SPQA/logs/vae_checkpoints/vae_epoch_best.pth"
  latent_dim: 2048 # UPDATED to match VAE bottleneck